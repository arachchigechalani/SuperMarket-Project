DROP DATABASE IF EXISTS Supermarket;
CREATE DATABASE IF NOT EXISTS Supermarket;
SHOW DATABASES;
USE Supermarket;

DROP TABLE IF EXISTS Item;
CREATE TABLE IF NOT EXISTS Item(
    itemId VARCHAR (50),
    description TEXT,
    unitPrice DECIMAL,
    qty INT (50),
    itemType VARCHAR (11),
    CONSTRAINT PRIMARY KEY (itemId)
);
SHOW TABLES;
DESC Item;

DROP TABLE IF EXISTS Customer;
CREATE TABLE IF NOT EXISTS Customer(
  custId VARCHAR (30) NOT NULL ,
  custTitle VARCHAR (30) NOT NULL ,
  custGender VARCHAR (20) NOT NULL ,
  CONSTRAINT PRIMARY KEY (custId)
);
SHOW TABLES;
DESC Customer;

DROP TABLE IF EXISTS `Order`;
CREATE TABLE IF NOT EXISTS `Order`(
  orderId VARCHAR (20),
  custId VARCHAR (30),
  orderDate DATE,
  orderTime VARCHAR(15),
  totalAmount DECIMAL (10,2),
  CONSTRAINT PRIMARY KEY (orderId),
  CONSTRAINT FOREIGN KEY (custId) REFERENCES Customer(custId) ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES;
DESC `Order`;

DROP TABLE IF EXISTS `Order Item`;
CREATE TABLE IF NOT EXISTS `Order Item`(
  orderId VARCHAR (20),
  itemId VARCHAR (50),
  qty INT,
  unitPrice DECIMAL(10,2),
  totalPrice DECIMAL(10,2),
  CONSTRAINT PRIMARY KEY (orderId,itemId),
  CONSTRAINT FOREIGN KEY (orderId) REFERENCES `Order`(orderId) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT FOREIGN KEY (itemId) REFERENCES Item(itemId) ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES;
DESC `Order Item`;

